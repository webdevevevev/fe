import{d as w,u as b,a as h,r as y,b as s,c as S,w as n,o as V,e as o,f as k,g as m,s as x,E as v,p as C,h as I,i as N,_ as B}from"./index-adbc4003.js";const E=a=>(C("data-v-5bfad2e0"),a=a(),I(),a),K=E(()=>N("h2",{class:"header"},"登录",-1)),M=w({__name:"Signin",setup(a){const r=b(),p=h(),e=y({name:"",pwd:""});async function c(){const l=await x(e.name,e.pwd);if(typeof l=="object"){const{sign:t}=l;r.commit("signin",{nickname:e.name,sign:t}),localStorage.setItem("sign",t),r.dispatch("getNickname");const d=r.getters.isAdmin?"/admin":"/";p.push(d)}else v.error({showClose:!0,message:l})}return(l,t)=>{const d=s("el-input"),i=s("el-form-item"),u=s("el-button"),f=s("router-link"),g=s("el-form");return V(),S(g,{class:"form",model:e,"label-width":"80px"},{default:n(()=>[K,o(i,{label:"用户名"},{default:n(()=>[o(d,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=_=>e.name=_)},null,8,["modelValue"])]),_:1}),o(i,{label:"密码"},{default:n(()=>[o(d,{modelValue:e.pwd,"onUpdate:modelValue":t[1]||(t[1]=_=>e.pwd=_),type:"password","show-password":"",onKeydown:k(c,["enter"])},null,8,["modelValue"])]),_:1}),o(i,null,{default:n(()=>[o(u,{type:"primary",onClick:c},{default:n(()=>[m("登录")]),_:1})]),_:1}),o(i,null,{default:n(()=>[o(f,{to:"signup",class:"link"},{default:n(()=>[m("没有账号？点此注册")]),_:1})]),_:1})]),_:1},8,["model"])}}});const j=B(M,[["__scopeId","data-v-5bfad2e0"]]);export{j as default};
