import{d as h,u as b,a as S,r as V,b as a,c as k,w as s,o as y,e as t,f as i,s as x,E as m,p as v,g as C,h as I,_ as N}from"./index-711f5c83.js";const B=l=>(v("data-v-fd571bf5"),l=l(),C(),l),E=B(()=>I("h2",{class:"header"},"登录",-1)),M=h({__name:"Signin",setup(l){const c=b(),p=S(),o=V({name:"",pwd:""});async function u(){let n;try{n=await x(o.name,o.pwd)}catch(e){return m.error({showClose:!0,message:e}),console.error(e)}if(typeof n=="object"){const{sign:e}=n;c.commit("signin",{nickname:o.name,sign:e}),localStorage.setItem("sign",e),c.dispatch("getNickname");const r=c.getters.isAdmin?"/admin":"/";p.push(r)}else m.error({showClose:!0,message:n})}return(n,e)=>{const r=a("el-input"),d=a("el-form-item"),f=a("el-button"),g=a("router-link"),w=a("el-form");return y(),k(w,{class:"form",model:o,"label-width":"80px"},{default:s(()=>[E,t(d,{label:"用户名"},{default:s(()=>[t(r,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=_=>o.name=_)},null,8,["modelValue"])]),_:1}),t(d,{label:"密码"},{default:s(()=>[t(r,{modelValue:o.pwd,"onUpdate:modelValue":e[1]||(e[1]=_=>o.pwd=_),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),t(d,null,{default:s(()=>[t(f,{type:"primary",onClick:u},{default:s(()=>[i("登录")]),_:1})]),_:1}),t(d,null,{default:s(()=>[t(g,{to:"signup",class:"link"},{default:s(()=>[i("没有账号？点此注册")]),_:1})]),_:1})]),_:1},8,["model"])}}});const j=N(M,[["__scopeId","data-v-fd571bf5"]]);export{j as default};
