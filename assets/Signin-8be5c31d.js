import{d as b,u as h,a as S,r as V,b as a,c as k,e as o,w as n,F as y,o as x,f as c,p as v,g as C,h as I,s as N,E as i,_ as B}from"./index-ee28ec69.js";const E=l=>(v("data-v-9ba13e30"),l=l(),C(),l),F=E(()=>I("h2",null,"登录",-1)),M=b({__name:"Signin",setup(l){const u=h(),d=S(),t=V({name:"",pwd:""});async function p(){let s;try{s=await N(t.name,t.pwd)}catch(e){return i.error({showClose:!0,message:e}),console.error(e)}if(typeof s=="object"){const{sign:e}=s;u.commit("signin",{nickname:t.name,sign:e}),localStorage.setItem("sign",e),u.dispatch("getNickname");const r=u.getters.isAdmin?"/admin":"/";d.push(r)}else i.error({showClose:!0,message:s})}return(s,e)=>{const r=a("el-input"),m=a("el-form-item"),f=a("el-button"),g=a("router-link"),w=a("el-form");return x(),k(y,null,[F,o(w,{model:t,"label-width":"80px"},{default:n(()=>[o(m,{label:"用户名"},{default:n(()=>[o(r,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=_=>t.name=_)},null,8,["modelValue"])]),_:1}),o(m,{label:"密码"},{default:n(()=>[o(r,{modelValue:t.pwd,"onUpdate:modelValue":e[1]||(e[1]=_=>t.pwd=_),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),o(m,null,{default:n(()=>[o(f,{type:"primary",onClick:p},{default:n(()=>[c("登录")]),_:1})]),_:1}),o(m,null,{default:n(()=>[o(g,{to:"signup",class:"link"},{default:n(()=>[c("没有账号？点此注册")]),_:1})]),_:1})]),_:1},8,["model"])],64)}}});const j=B(M,[["__scopeId","data-v-9ba13e30"]]);export{j as default};
