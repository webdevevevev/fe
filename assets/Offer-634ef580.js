import{d as O,a as $,r as h,b as w,m as l,e as f,i as u,F as j,n as x,c as P,O as B,q as D,U as N,t as R,x as Y,o as r,w as y,y as b,k as d,z,A as v,B as F,S as p,C as H,p as q,h as L,D as M,G as U,H as V,J as E,_ as G}from"./index-c98300ed.js";import{P as J}from"./Post-6e36944b.js";const K=c=>(q("data-v-339f6ed6"),c=c(),L(),c),Q={class:"main"},T={class:"aside"},W=K(()=>u("h3",{class:"aside-header"},"欢迎来列表",-1)),X={key:0,class:"list"},Z=O({__name:"Offer",props:{id:{type:[Number,String],required:!0}},setup(c){const g=c;$();const i=h(new B);i.id=Number(g.id);const a=h([]);async function S(e,s){const n=await D(e.id);n.user=new N,n.user.id=n.userId,delete n.userId,Object.assign(e,n);const _=await Promise.all(e.answerIds.map(t=>R(t)));s.push(..._);for(const t of s)Y(t.user.id).then(o=>{t.user=o})}S(i,a);function A(e){a.push(e)}async function C(e){const s=a[e];await M(s.id),s.state=p.accepted,i.state=U.fulfilled}async function k(e){const s=a[e];await V(s.id),s.state=p.rejected,a.splice(e,1)}async function I(e){const s=a[e];await E(s.id),s.state=p.canceled}return(e,s)=>{const n=w("el-tooltip"),_=w("el-empty");return r(),l("main",Q,[f(J,{base:i,onPublish:A,class:"article"},null,8,["base"]),u("aside",T,[W,a.length?(r(),l("ul",X,[(r(!0),l(j,null,x(a,(t,o)=>(r(),l("li",{key:t.id,class:"answer-preview"},[f(H,{base:t,onAccept:m=>C(o),onReject:m=>k(o),onCancel:m=>I(o),shadow:"hover"},{footer:y(()=>[u("span",null,b(d(z)(t.ctime,"YYYY-MM-DD HH:mm").value),1),f(n,{content:`状态：${d(v)[t.state]}`},{default:y(()=>[u("span",{class:F(["state",d(p)[t.state]])},b(d(v)[t.state]),3)]),_:2},1032,["content"])]),_:2},1032,["base","onAccept","onReject","onCancel"])]))),128))])):(r(),P(_,{key:1,description:"列表为空","image-size":100}))])])}}});const te=G(Z,[["__scopeId","data-v-339f6ed6"]]);export{te as default};
