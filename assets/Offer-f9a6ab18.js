import{d as x,a as A,r as m,b as h,l as p,e as f,h as u,F as C,m as P,c as B,O as D,n as $,U as N,q as R,t as Y,S as c,o as r,w as b,x as w,j as d,y as z,z as g,A as F,C as q,p as H,g as L,B as M,D as U,G as V,_ as E}from"./index-f000c5d8.js";import{P as G}from"./Post-8fbe151a.js";const J=o=>(H("data-v-b2b67ac3"),o=o(),L(),o),K={class:"main"},Q={class:"aside"},T=J(()=>u("h3",{class:"aside-header"},"欢迎来列表",-1)),W={key:0,class:"list"},X=x({__name:"Offer",props:{id:{type:[Number,String],required:!0}},setup(o){const y=o;A();const i=m(new D);i.id=Number(y.id);const a=m([]);async function v(e,t){const n=await $(e.id);n.user=new N,n.user.id=n.userId,delete n.userId,Object.assign(e,n);const _=await Promise.all(e.answerIds.map(s=>R(s)));t.push(..._.filter(S));for(const s of t)Y(s.user.id).then(l=>{s.user=l})}v(i,a);function S({state:e}){return e===c.pending||e===c.accepted}function j(e){a.push(e)}async function I(e){const t=a[e];await M(t.id),t.state=c.accepted,i.state=U.fulfilled}async function O(e){const t=a[e];await V(t.id),t.state=c.rejected,a.splice(e,1)}return(e,t)=>{const n=h("el-tooltip"),_=h("el-empty");return r(),p("main",K,[f(G,{base:i,onPublish:j,class:"article"},null,8,["base"]),u("aside",Q,[T,a.length?(r(),p("ul",W,[(r(!0),p(C,null,P(a,(s,l)=>(r(),p("li",{key:s.id,class:"answer-preview"},[f(q,{base:s,onAccept:k=>I(l),onReject:k=>O(l),shadow:"hover"},{footer:b(()=>[u("span",null,w(d(z)(s.ctime,"YYYY-MM-DD HH:mm").value),1),f(n,{content:`状态：${d(g)[s.state]}`},{default:b(()=>[u("span",{class:F(["state",d(c)[s.state]])},w(d(g)[s.state]),3)]),_:2},1032,["content"])]),_:2},1032,["base","onAccept","onReject"])]))),128))])):(r(),B(_,{key:1,description:"列表为空","image-size":100}))])])}}});const se=E(X,[["__scopeId","data-v-b2b67ac3"]]);export{se as default};
