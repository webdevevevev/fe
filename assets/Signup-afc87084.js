import{d as U,a as k,u as x,r as S,j as c,b as u,c as N,w as a,U as D,o as T,e as o,k as B,I as E,g as V,v as j,E as r,l as M,p as O,h as P,i as $,_ as h}from"./index-7cf8c193.js";import{_ as z}from"./CitySelect.vue_vue_type_script_setup_true_lang-db60c8a1.js";const R=d=>(O("data-v-70070619"),d=d(),P(),d),q=R(()=>$("h2",{class:"header"},"注册",-1)),A=U({__name:"Signup",setup(d){const w=k(),v=x(),l=S(new D),p=c(-1),i=c(-1),_=c("");async function g(){const m=await j(l);if(m.length){for(const{constraints:s}of m)if(s)for(const f of Object.values(s))r.error({showClose:!0,message:f});return console.error(m)}if(p.value<0){r.error({showClose:!0,message:"请选择省份"});return}if(i.value<0){r.error({showClose:!0,message:"请选择城市"});return}if(_.value!==l.pwd){r.error({showClose:!0,message:"密码不一致"});return}const e=v.state.provinces[p.value];l.provinceId=e.id,l.cityId=e.cities[i.value].id;const n=await M(l,!1);v.commit("signin",n),r.success({showClose:!0,message:"注册成功"}),w.push({name:"signin"})}return(m,e)=>{const n=u("el-input"),s=u("el-form-item"),f=u("el-option"),C=u("el-select"),b=u("el-button"),y=u("router-link"),I=u("el-form");return T(),N(I,{class:"form",model:l,"label-width":"80px"},{default:a(()=>[q,o(s,{label:"用户名"},{default:a(()=>[o(n,{modelValue:l.nickname,"onUpdate:modelValue":e[0]||(e[0]=t=>l.nickname=t)},null,8,["modelValue"])]),_:1}),o(s,{label:"密码"},{default:a(()=>[o(n,{modelValue:l.pwd,"onUpdate:modelValue":e[1]||(e[1]=t=>l.pwd=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),o(s,{label:"重复密码"},{default:a(()=>[o(n,{modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=t=>_.value=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),o(s,{label:"姓名"},{default:a(()=>[o(n,{modelValue:l.name,"onUpdate:modelValue":e[3]||(e[3]=t=>l.name=t)},null,8,["modelValue"])]),_:1}),o(s,{label:"证件类型"},{default:a(()=>[o(C,{modelValue:l.IDCardType,"onUpdate:modelValue":e[4]||(e[4]=t=>l.IDCardType=t)},{default:a(()=>[o(f,{label:"中华人民共和国居民身份证",value:B(E).zhCN},null,8,["value"])]),_:1},8,["modelValue"])]),_:1}),o(s,{label:"证件号码"},{default:a(()=>[o(n,{modelValue:l.IDCardNo,"onUpdate:modelValue":e[5]||(e[5]=t=>l.IDCardNo=t)},null,8,["modelValue"])]),_:1}),o(s,{label:"手机号码"},{default:a(()=>[o(n,{modelValue:l.phone,"onUpdate:modelValue":e[6]||(e[6]=t=>l.phone=t)},null,8,["modelValue"])]),_:1}),o(s,{label:"用户简介"},{default:a(()=>[o(n,{modelValue:l.intro,"onUpdate:modelValue":e[7]||(e[7]=t=>l.intro=t)},null,8,["modelValue"])]),_:1}),o(s,{label:"注册城市"},{default:a(()=>[o(z,{province:p.value,"onUpdate:province":e[8]||(e[8]=t=>p.value=t),city:i.value,"onUpdate:city":e[9]||(e[9]=t=>i.value=t)},null,8,["province","city"])]),_:1}),o(s,null,{default:a(()=>[o(b,{type:"primary",onClick:g},{default:a(()=>[V("注册")]),_:1})]),_:1}),o(s,null,{default:a(()=>[o(y,{to:"/signin",class:"link"},{default:a(()=>[V("已有账号？点此登录")]),_:1})]),_:1})]),_:1},8,["model"])}}});const H=h(A,[["__scopeId","data-v-70070619"]]);export{H as default};
