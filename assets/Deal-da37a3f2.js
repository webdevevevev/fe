import{d as b,r as k,i as v,X as u,b as d,c as x,h as y,x as C,e as a,w as m,F as S,Y as P,o as V,f as K,_ as R}from"./index-ee28ec69.js";import{_ as U}from"./CitySelect.vue_vue_type_script_setup_true_lang-0db2f6e3.js";const B={class:"header"},i=200,E=b({__name:"Deal",setup(F){const o=k({province:-1,city:-1,monthRange:[]}),g=[{text:"本月",value:[new Date,new Date]},{text:"本年",value(){const t=new Date;return[new Date(new Date().getFullYear(),0),t]}},{text:"过去6个月",value(){const t=new Date,e=new Date;return e.setMonth(e.getMonth()-6),[e,t]}}],h=[{key:"time",dataKey:"time",title:"达成日期",width:i,sortable:!0,align:"center"},{key:"offerId",dataKey:"offerId",title:"请求标识",width:i,align:"center"},{key:"offerPrice",dataKey:"offerPrice",title:"发布者支付中介费",width:i,align:"center"},{key:"answerPrice",dataKey:"answerPrice",title:"响应者支付中介费",width:i,align:"center"},{key:"price",dataKey:"price",title:"中介费",width:i,align:"center"}],p=v([]);function w(){var t,e;P(o.city,(t=o.monthRange[0])==null?void 0:t.getTime(),(e=o.monthRange[1])==null?void 0:e.getTime()).then(l=>{for(const n of l)n.price=n.offerPrice+n.answerPrice;p.value=l,f({key:"time",order:u.DESC})})}w();const _=v({time:u.DESC,price:u.ASC}),f=({key:t,order:e})=>{_.value[t]=e;const l=t==="time"?(s,r)=>s.time.localeCompare(r.time):(s,r)=>s-r,n=e===u.ASC?l:(s,r)=>l(r,s);p.value.sort(n)};return(t,e)=>{const l=d("el-date-picker"),n=d("el-form-item"),s=d("el-button"),r=d("el-form"),D=d("el-table-v2");return V(),x(S,null,[y("header",B,[y("h2",null," 共"+C(p.value.length)+"条 ",1),a(r,{class:"toolbar"},{default:m(()=>[a(n,{class:"tool"},{default:m(()=>[a(l,{modelValue:o.monthRange,"onUpdate:modelValue":e[0]||(e[0]=c=>o.monthRange=c),type:"monthrange","unlink-panels":"","range-separator":"至","start-placeholder":"起始月份","end-placeholder":"终止月份",shortcuts:g},null,8,["modelValue"])]),_:1}),a(n,{class:"tool"},{default:m(()=>[a(U,{province:o.province,"onUpdate:province":e[1]||(e[1]=c=>o.province=c),city:o.city,"onUpdate:city":e[2]||(e[2]=c=>o.city=c)},null,8,["province","city"])]),_:1}),a(n,{class:"tool"},{default:m(()=>[a(s,{type:"primary",class:"btn",onClick:e[3]||(e[3]=()=>{})},{default:m(()=>[K(" 搜索 ")]),_:1})]),_:1})]),_:1})]),a(D,{"sort-state":_.value,"onUpdate:sortState":e[4]||(e[4]=c=>_.value=c),columns:h,data:p.value,width:i*5,height:600,fixed:"",onColumnSort:f,class:"list"},null,8,["sort-state","data","width"])],64)}}});const T=R(E,[["__scopeId","data-v-b20638b2"]]);export{T as default};
