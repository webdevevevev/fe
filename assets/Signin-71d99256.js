import{d as h,u as y,a as S,r as V,b as a,c as b,w as s,o as k,e as o,f as x,g as m,s as v,E as p,p as C,h as I,i as N,_ as B}from"./index-bd5276af.js";const E=l=>(C("data-v-322ff382"),l=l(),I(),l),K=E(()=>N("h2",{class:"header"},"登录",-1)),M=h({__name:"Signin",setup(l){const c=y(),u=S(),e=V({name:"",pwd:""});async function _(){let n;try{n=await v(e.name,e.pwd)}catch{p.error({showClose:!0,message:"密码错误"});return}if(typeof n=="object"){const{sign:t}=n;c.commit("signin",{nickname:e.name,sign:t}),localStorage.setItem("sign",t),c.dispatch("getNickname");const r=c.getters.isAdmin?"/admin":"/";u.push(r)}else p.error({showClose:!0,message:n})}return(n,t)=>{const r=a("el-input"),i=a("el-form-item"),f=a("el-button"),g=a("router-link"),w=a("el-form");return k(),b(w,{class:"form",model:e,"label-width":"80px"},{default:s(()=>[K,o(i,{label:"用户名"},{default:s(()=>[o(r,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=d=>e.name=d)},null,8,["modelValue"])]),_:1}),o(i,{label:"密码"},{default:s(()=>[o(r,{modelValue:e.pwd,"onUpdate:modelValue":t[1]||(t[1]=d=>e.pwd=d),type:"password","show-password":"",onKeydown:x(_,["enter"])},null,8,["modelValue"])]),_:1}),o(i,null,{default:s(()=>[o(f,{type:"primary",onClick:_},{default:s(()=>[m("登录")]),_:1})]),_:1}),o(i,null,{default:s(()=>[o(g,{to:"signup",class:"link"},{default:s(()=>[m("没有账号？点此注册")]),_:1})]),_:1})]),_:1},8,["model"])}}});const j=B(M,[["__scopeId","data-v-322ff382"]]);export{j as default};
