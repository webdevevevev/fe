import{d as x,a as A,r as m,b as h,m as p,e as f,i as u,F as C,n as P,c as B,O as D,q as $,U as N,t as R,x as Y,S as c,o as i,w as b,y as w,k as d,z,A as y,B as F,C as H,p as q,h as L,D as M,G as U,H as V,_ as E}from"./index-ce06aa2f.js";import{P as G}from"./Post-3f224ead.js";const J=o=>(q("data-v-b2b67ac3"),o=o(),L(),o),K={class:"main"},Q={class:"aside"},T=J(()=>u("h3",{class:"aside-header"},"欢迎来列表",-1)),W={key:0,class:"list"},X=x({__name:"Offer",props:{id:{type:[Number,String],required:!0}},setup(o){const g=o;A();const r=m(new D);r.id=Number(g.id);const a=m([]);async function v(e,t){const n=await $(e.id);n.user=new N,n.user.id=n.userId,delete n.userId,Object.assign(e,n);const _=await Promise.all(e.answerIds.map(s=>R(s)));t.push(..._.filter(S));for(const s of t)Y(s.user.id).then(l=>{s.user=l})}v(r,a);function S({state:e}){return e===c.pending||e===c.accepted}function k(e){a.push(e)}async function I(e){const t=a[e];await M(t.id),t.state=c.accepted,r.state=U.fulfilled}async function O(e){const t=a[e];await V(t.id),t.state=c.rejected,a.splice(e,1)}return(e,t)=>{const n=h("el-tooltip"),_=h("el-empty");return i(),p("main",K,[f(G,{base:r,onPublish:k,class:"article"},null,8,["base"]),u("aside",Q,[T,a.length?(i(),p("ul",W,[(i(!0),p(C,null,P(a,(s,l)=>(i(),p("li",{key:s.id,class:"answer-preview"},[f(H,{base:s,onAccept:j=>I(l),onReject:j=>O(l),shadow:"hover"},{footer:b(()=>[u("span",null,w(d(z)(s.ctime,"YYYY-MM-DD HH:mm").value),1),f(n,{content:`状态：${d(y)[s.state]}`},{default:b(()=>[u("span",{class:F(["state",d(c)[s.state]])},w(d(y)[s.state]),3)]),_:2},1032,["content"])]),_:2},1032,["base","onAccept","onReject"])]))),128))])):(i(),B(_,{key:1,description:"列表为空","image-size":100}))])])}}});const se=E(X,[["__scopeId","data-v-b2b67ac3"]]);export{se as default};
